function hydraupdates(){function e(e,t,n){e.loadingPromise=t.getVersions().then(function(n){e.currentVersion=n.data.currentVersion,e.repVersion=n.data.repVersion,e.updateAvailable=n.data.updateAvailable,e.repVersion>e.currentVersion&&t.getChangelog().then(function(t){e.changelog=t.data.changelog})}),t.getVersionHistory().then(function(t){e.versionHistory=n.trustAsHtml(t.data.versionHistory)}),e.update=function(){t.update()},e.showChangelog=function(){t.showChanges(e.changelog)}}return e.$inject=["$scope","UpdateService","$sce"],{templateUrl:"static/html/directives/updates.html",controller:e}}function searchResult(){function e(e,t,n){function a(){return e.showDuplicates&&e.titleGroup[0].length>1&&e.hashGroupExpanded[e.titleGroup[0][0].hash]?e.titleGroup[0].slice(1):[]}function o(){return e.titleGroup.length>1&&e.titleGroupExpanded?e.titleGroup.slice(1):[]}function r(t){return e.showDuplicates&&e.hashGroupExpanded[t[0].hash]?t.slice(1):[]}e.titleGroupExpanded=!1,e.hashGroupExpanded={},e.toggleTitleGroup=function(){e.titleGroupExpanded=!e.titleGroupExpanded,e.titleGroupExpanded||(e.hashGroupExpanded[e.titleGroup[0][0].hash]=!1)},e.groupingRowDuplicatesToShow=a,e.otherTitleRowsToShow=o,e.hashGroupDuplicatesToShow=r}return{templateUrl:"static/html/directives/search-result.html",require:"^titleGroup",scope:{titleGroup:"=",showDuplicates:"=",selected:"=",rowIndex:"="},controller:["$scope","$element","$attrs",e],multiElement:!0}}function otherColumns(e,t,n,a){function o(e,t,n,o){function r(n){if(0!=n.has_nfo){var a=new URI("internalapi/getnfo");return a.addQuery("indexer",n.indexer),a.addQuery("guid",n.indexerguid),t.get(a.toString()).then(function(t){t.data.has_nfo?e.openModal("lg",t.data.nfo):angular.isUndefined(n.message)?o.info("No NFO available"):o.error(n.message)})}}function i(e,t){var a=n.open({template:'<pre class="nfo"><span ng-bind-html="nfo"></span></pre>',controller:"NfoModalInstanceCtrl",size:e,resolve:{nfo:function(){return t}}});a.result.then()}function l(e){a.location.href=e.link}e.showNfo=r,e.openModal=i,e.downloadNzb=l}return o.$inject=["$scope","$http","$uibModal","growl"],{scope:{result:"="},multiElement:!0,link:function(a,o,r){e.get("static/html/directives/search-result-non-title-columns.html",{cache:t}).success(function(e){o.replaceWith(n(e)(a))})},controller:o}}function NfoModalInstanceCtrl(e,t,n){e.nfo=n,e.ok=function(){t.close(e.selected.item)},e.cancel=function(){t.dismiss()}}function searchHistory(){function e(e,t,n){function a(n){t.get("internalapi/getsearchrequests",{params:{page:n,limit:e.limit,type:e.type}}).success(function(t){e.searchRequests=t.searchRequests,e.totalRequests=t.totalRequests})}e.type="All",e.limit=100,e.pagination={current:1},a(1),e.pageChanged=function(e){a(e)},e.changeType=function(t){e.type=t,a(e.pagination.current)},e.openSearch=function(e){var t={};"imdbid"==e.identifier_key?t.imdbid=e.identifier_value:("tvdbid"==e.identifier_key||"rid"==e.identifier_key)&&("rid"==e.identifier_key?t.rid=e.identifier_value:t.tvdbid=e.identifier_value,""!=e.season&&(t.season=e.season),""!=e.episode&&(t.episode=e.episode)),""!=e.query&&(t.query=e.query),"tv"==e.type?t.mode="tvsearch":"tv"==e.type?t.mode="moviesearch":t.mode="search",""!=e.category&&(t.category=e.category),t.category=e.category,n.go("search",t,{inherit:!1})}}return{templateUrl:"static/html/directives/search-history.html",controller:["$scope","$http","$state",e],scope:{}}}function onFinishRender(e){function t(t,n,a){t.$last===!0&&e(function(){t.$evalAsync(a.onFinishRender)})}return{link:t}}function hydralog(){function e(e,t,n){e.logPromise=t.get("internalapi/getlogs").success(function(t){e.log=n.trustAsHtml(t.log)})}return e.$inject=["$scope","$http","$sce"],{template:'<div cg-busy="{promise:logPromise,message:\'Loading log file\'}"><pre ng-bind-html="log" style="text-align: left"></pre></div>',controller:e}}function indexerStatuses(){function e(e,t){function n(){t.get("internalapi/getindexerstatuses").success(function(t){e.indexerStatuses=t.indexerStatuses})}n(),e.isInPast=function(e){return 1e3*e<(new Date).getTime()},e.enable=function(n){t.get("internalapi/enableindexer",{params:{name:n}}).then(function(t){e.indexerStatuses=t.data.indexerStatuses})}}return{templateUrl:"static/html/directives/indexer-statuses.html",controller:["$scope","$http",e]}}function formatDate(e){return function(t,n){if(t){if(1e3*t<(new Date).getTime()&&n)return"";var a=1e3*t;return a=e(a,"yyyy-MM-dd HH:mm:ss Z")}return""}}function focusOn(){function e(e,t,n){e.$on("focusOn",function(e,a){a===n.focusOn&&t[0].focus()})}return e}function downloadHistory(){function e(e,t){function n(n){t.get("internalapi/getnzbdownloads",{params:{page:n,limit:e.limit,type:e.type}}).success(function(t){e.nzbDownloads=t.nzbDownloads,e.totalDownloads=t.totalDownloads})}e.type="All",e.limit=100,e.pagination={current:1},e.changeType=function(t){e.type=t,n(e.pagination.current)},n(1),e.pageChanged=function(e){n(e)}}return{templateUrl:"static/html/directives/download-history.html",controller:["$scope","$http",e],scope:{}}}function cfgFormEntry(){return{templateUrl:"static/html/directives/cfg-form-entry.html",require:["^title","^cfg"],scope:{title:"@",cfg:"=",help:"@",type:"@?",options:"=?"},controller:["$scope","$element","$attrs",function(e,t,n){e.type=angular.isDefined(e.type)?e.type:"text",e.options=angular.isDefined(e.type)?e.$eval(n.options):[]}]}}function addableNzb(){function e(e,t,n,a){e.classname="",t.getSafe().then(function(t){e.downloader=t.downloader.downloader,"none"!=e.downloader?(e.enabled=!0,e.classname="sabnzbd"==e.downloader?"sabnzbd":"nzbget"):e.enabled=!1}),e.add=function(){e.classname="nzb-spinning",n.download([{indexerguid:e.indexerguid,title:e.title,indexer:e.indexer,dbsearchid:e.dbsearchid}]).then(function(t){t.data.success?e.classname="sabnzbd"==e.downloader?"sabnzbd-success":"nzbget-success":(e.classname="sabnzbd"==e.downloader?"sabnzbd-error":"nzbget-error",a.error("Unable to add NZB. Make sure the downloader is running and properly configured."))},function(){e.classname="sabnzbd"==e.downloader?"sabnzbd-error":"nzbget-error",a.error("An unexpected error occurred while trying to contact NZB Hydra or add the NZB.")})}}return e.$inject=["$scope","ConfigService","NzbDownloadService","growl"],{templateUrl:"static/html/directives/addable-nzb.html",require:["^indexerguid","^title","^indexer","^dbsearchid"],scope:{indexerguid:"=",title:"=",indexer:"=",dbsearchid:"="},controller:e}}function UpdateService(e,t,n,a){function o(){return e.get("internalapi/get_versions").then(function(e){return d=e.data.currentVersion,p=e.data.repVersion,u=e.data.updateAvailable,e})}function r(){return e.get("internalapi/get_changelog").then(function(e){return c=e.data.changelog,e})}function i(){return e.get("internalapi/get_version_history").then(function(e){return m=e.data.versionHistory,e})}function l(){var e=angular.injector(["ng","ui.bootstrap"]),t=e.get("$uibModal"),n={size:"lg",templateUrl:"static/html/changelog.html",resolve:{changelog:function(){return c}},controller:function(e,t,n,a){a=t.trustAsHtml(a),e.changelog=a,console.log(a),e.ok=function(){n.dismiss()}}},a=t.open(n);a.result.then()}function s(){n.start("Updating. Please stand by..."),e.get("internalapi/update").then(function(e){e.data.success?a.countdownAndReload("Update complete."):(n.reset(),t.info("An error occurred while updating. Please check the logs."))},function(){n.reset(),t.info("An error occurred while updating. Please check the logs.")})}var d,p,u,c,m;return{update:s,showChanges:l,getVersions:o,getChangelog:r,getVersionHistory:i}}function UpdateFooterController(e,t){e.updateAvailable=!1,t.getVersions().then(function(n){e.currentVersion=n.data.currentVersion,e.repVersion=n.data.repVersion,e.updateAvailable=n.data.updateAvailable,e.repVersion>e.currentVersion&&t.getChangelog().then(function(t){e.changelog=t.data.changelog})}),e.update=function(){t.update()},e.showChangelog=function(){t.showChanges(e.changelog)}}function SystemController(e,t,n,a,o){e.shutdown=function(){o.shutdown().then(function(){n.info("Shutdown initiated. Cya!")},function(){n.info("Unable to send shutdown command.")})},e.restart=function(){a.restart()},e.tabs=[{active:!1,state:"system"},{active:!1,state:"system.updates"},{active:!1,state:"system.log"},{active:!1,state:"system.about"}];for(var r=0;r<e.tabs.length;r++)t.is(e.tabs[r].state)&&(e.tabs[r].active=!0);e.goToState=function(n){t.go(e.tabs[n].state)}}function StatsService(e){function t(){return e.get("internalapi/getstats").success(function(e){return e.data})}return{get:t}}function StatsController(e,t,n){t=t.data,e.nzbDownloads=null,e.avgResponseTimes=t.avgResponseTimes,e.avgIndexerSearchResultsShares=t.avgIndexerSearchResultsShares,e.avgIndexerAccessSuccesses=t.avgIndexerAccessSuccesses,e.tabs=[{active:!1,state:"stats"},{active:!1,state:"stats.indexers"},{active:!1,state:"stats.searches"},{active:!1,state:"stats.downloads"}];for(var a=0;a<e.tabs.length;a++)n.is(e.tabs[a].state)&&(e.tabs[a].active=!0);e.goToState=function(t){n.go(e.tabs[t].state)}}function SearchService(e){function t(t,n,r,i,l,s,d,p,u,c,m,h){console.log("Category: "+t);var g;return t.indexOf("Movies")>-1||0==t.indexOf("20")?(console.log("Search for movies"),g=new URI("internalapi/moviesearch"),_.isUndefined(r)?(console.log("moviesearch per query"),g.addQuery("query",n)):(console.log("moviesearch per tmdbid"),g.addQuery("tmdbid",r),g.addQuery("title",i))):t.indexOf("TV")>-1||0==t.indexOf("50")?(console.log("Search for shows"),g=new URI("internalapi/tvsearch"),_.isUndefined(l)?(console.log("tvsearch per query"),g.addQuery("query",n)):(g.addQuery("tvdbid",l),g.addQuery("title",i)),_.isUndefined(s)||g.addQuery("season",s),_.isUndefined(d)||g.addQuery("episode",d)):(console.log("Search for all"),g=new URI("internalapi/search"),g.addQuery("query",n)),_.isNumber(p)&&g.addQuery("minsize",p),_.isNumber(u)&&g.addQuery("maxsize",u),_.isNumber(c)&&g.addQuery("minage",c),_.isNumber(m)&&g.addQuery("maxage",m),angular.isUndefined(h)||g.addQuery("indexers",decodeURIComponent(h)),g.addQuery("category",t),g=g.toString(),console.log("Calling "+g),o=g,e.get(g).then(a)}function n(t){return o.removeQuery("offset"),o.addQuery("offset",t),console.log("Calling "+o),e.get(o).then(a)}function a(e){var t=e.data.results,n=e.data.indexersearches,a=e.data.total,o=t.length;return _.each(n,function(e){e.did_search&&(e.averageResponseTime=_.reduce(e.api_accesses,function(e,t){return e+t.response_time},0),e.averageResponseTime=e.averageResponseTime/e.api_accesses.length)}),{results:t,indexersearches:n,total:a,resultsCount:o}}var o,r={search:t,loadMore:n};return r}function SearchResultsController(e,t,n,a,o,r,i,l){function s(e){return e[0][t.sortPredicate]}function d(e){return e[0][0].guid}function p(e){var t=n.defer();return o.start(e),a(function(){t.resolve()},100),t.promise}function u(e,n){p("Sorting / filtering...").then(function(){e==t.sortPredicate?t.sortReversed=!t.sortReversed:t.sortReversed=n,t.sortPredicate=e,t.filteredResults=c(t.results),o.reset()})}function c(n){function a(n){var a=!(_.isNumber(e.minsize)&&n.size/1024/1024<e.minsize||_.isNumber(e.maxsize)&&n.size/1024/1024>e.maxsize||_.isNumber(e.minage)&&n.age_days<e.minage||_.isNumber(e.maxage)&&n.age_days>e.maxage);return a||t.countFilteredOut++,a}function o(e){return t.indexerDisplayState[e.indexer.toLowerCase()]}function r(e){return e.title.toLowerCase().replace(/[\s\-\._]/gi,"")}function l(e){function n(e){var n=_.sortBy(e,function(e){var n=e[t.sortPredicate];return t.sortReversed?-n:n});return n=_.sortBy(n,function(e){return-1*e.indexerscore})}function a(e){var n=e[0][t.sortPredicate];return t.sortReversed?-n:n}return _.chain(e).groupBy("hash").map(n).sortBy(a).value()}function s(e){var n=e[0][0][t.sortPredicate];return t.sortReversed?-n:n}t.countFilteredOut=0;var d=_.chain(n).filter(o).filter(a).groupBy(r).map(l).sortBy(s).value();return t.countFilteredOut>0&&i.info("Filtered "+t.countFilteredOut+" of the retrieved results"),d}function m(){o.reset()}function h(){console.log("Loading more result withs offset "+t.resultsCount),p("Loading more results...").then(function(){r.loadMore(t.resultsCount).then(function(e){console.log("Returned more results:"),console.log(e.results),console.log(t.results),console.log("Total: "+e.total),t.results=t.results.concat(e.results),t.filteredResults=c(t.results),t.total=e.total,t.resultsCount+=e.resultsCount,console.log("Results count: "+t.resultsCount),console.log("Total results in $scope.results: "+t.results.length),m()})})}function g(e){t.indexerDisplayState[e.toLowerCase()]=t.indexerDisplayState[e.toLowerCase()],p("Filtering. Sorry...").then(function(){t.filteredResults=c(t.results)}).then(function(){m()})}function f(){return t.results.length}function y(){if(angular.isUndefined(t.selected)||0==t.selected.length)i.info("You should select at least one result...");else{var e=_.map(t.selected,function(e){return{indexerguid:e.indexerguid,title:e.title,indexer:e.indexer,dbsearchid:e.dbsearchid}});console.log(e),l.download(e).then(function(e){e.data.success?i.info("Successfully added "+e.data.added+" of "+e.data.of+" NZBs"):i.error("Error while adding NZBs")},function(){i.error("Error while adding NZBs")})}}t.sortPredicate="epoch",t.sortReversed=!0,t.limitTo=100,t.offset=0,t.indexersearches=e.indexersearches,t.indexerDisplayState=[],t.indexerResultsInfo={},t.groupExpanded={},t.doShowDuplicates=!1,t.selected=[],t.countFilteredOut=0,_.forEach(t.indexersearches,function(e){t.indexerDisplayState[e.indexer.toLowerCase()]=!0}),_.forEach(t.indexersearches,function(e){t.indexerResultsInfo[e.indexer.toLowerCase()]={loadedResults:e.loaded_results}}),t.results=e.results,t.total=e.total,t.resultsCount=e.resultsCount,t.filteredResults=c(t.results),m(),t.firstResultPredicate=s,t.groupId=d,t.setSorting=u,t.toggleTitlegroupExpand=function(e){t.groupExpanded[e[0][0].title]=!t.groupExpanded[e[0][0].title],t.groupExpanded[e[0][0].hash]=!t.groupExpanded[e[0][0].hash]},t.stopBlocking=m,t.loadMore=h,t.toggleIndexerDisplay=g,t.countResults=f,t.downloadSelected=y,t.invertSelection=function(){t.selected=_.difference(t.results,t.selected)}}function SearchController(e,t,n,a,o,r,i,l){function s(e){return _.isUndefined(e)||_.isNaN(e)||""==e?void 0:(e=parseInt(e),_.isNumber(e)?e:void 0)}function d(){var t=_.filter(e.availableIndexers).filter(function(e){return e.activated});return _.pluck(t,"name").join("|")}function p(t){return angular.isUndefined(e.indexers)?t.preselect:_.contains(e.indexers,t.name)}e.mode=n.mode,e.category=_.isUndefined(n.category)||""==n.category?"All":n.category,e.tmdbid=n.tmdbid,e.tvdbid=n.tvdbid,e.rid=n.rid,e.title=n.title,e.season=n.season,e.episode=n.episode,e.query=n.query,e.minsize=s(n.minsize),e.maxsize=s(n.maxsize),e.minage=s(n.minage),e.maxage=s(n.maxage),!_.isUndefined(e.title)&&_.isUndefined(e.query)&&(e.query=e.title),angular.isUndefined(n.indexers)||(e.indexers=decodeURIComponent(n.indexers).split("|")),e.showIndexers={};var u;e.typeAheadWait=300,e.selectedItem="",e.autocompleteLoading=!1,e.isAskById=e.category.indexOf("TV")>-1||e.category.indexOf("Movies")>-1,e.isById={value:!0},e.availableIndexers=[],e.autocompleteClass="autocompletePosterMovies",e.toggle=function(t){if(e.category=t,e.isAskById=e.category.indexOf("TV")>-1||e.category.indexOf("Movies")>-1,r("focus-query-box"),e.query="",u.searching.categorysizes.enable_category_sizes){var n=u.searching.categorysizes[(t+" min").toLowerCase().replace(" ","")],a=u.searching.categorysizes[(t+" max").toLowerCase().replace(" ","")];_.isNumber(n)?e.minsize=n:e.minsize="",_.isNumber(a)?e.maxsize=a:e.maxsize=""}},e.getAutocomplete=function(n){return e.autocompleteLoading=!0,e.isById.value?e.category.indexOf("Movies")>-1?t.get("internalapi/autocomplete?type=movie",{params:{input:n}}).then(function(t){return e.autocompleteLoading=!1,t.data.results}):e.category.indexOf("TV")>-1?t.get("internalapi/autocomplete?type=tv",{params:{input:n}}).then(function(t){return e.autocompleteLoading=!1,t.data.results}):{}:{}},e.startSearch=function(){l.start("Searching...");var t=angular.isUndefined(e.indexers)?void 0:e.indexers.join("|");o.search(e.category,e.query,n.tmdbid,e.title,e.tvdbid,e.season,e.episode,e.minsize,e.maxsize,e.minage,e.maxage,t).then(function(t){a.go("search.results",{results:t.results,indexersearches:t.indexersearches,total:t.total,resultsCount:t.resultsCount,minsize:e.minsize,maxsize:e.maxsize,minage:e.minage,maxage:e.maxage},{inherit:!0}),e.tmdbid=void 0,e.tvdbid=void 0})},e.goToSearchUrl=function(){var t={};e.category.indexOf("Movies")>-1?(t.mode="moviesearch",t.title=e.title,t.mode="moviesearch"):e.category.indexOf("TV")>-1?(t.mode="tvsearch",t.title=e.title):"Ebook"==e.category?t.mode="ebook":t.mode="search",t.tmdbid=e.tmdbid,t.tvdbid=e.tvdbid,t.title=e.title,t.season=e.season,t.episode=e.episode,t.query=e.query,t.minsize=e.minsize,t.maxsize=e.maxsize,t.minage=e.minage,t.maxage=e.maxage,t.category=e.category,t.indexers=encodeURIComponent(d()),a.go("search",t,{inherit:!1,notify:!0,reload:!0})},e.selectAutocompleteItem=function(t){e.selectedItem=t,e.title=t.title,e.category.indexOf("Movies")>-1?e.tmdbid=t.value:e.category.indexOf("TV")>-1&&(e.tvdbid=t.value),e.query="",e.goToSearchUrl()},e.startQuerySearch=function(){e.title=void 0,e.tmdbid=void 0,e.tvdbid=void 0,e.goToSearchUrl()},e.autocompleteActive=function(){return e.category.indexOf("TV")>-1||e.category.indexOf("Movies")>-1},e.seriesSelected=function(){return e.category.indexOf("TV")>-1},e.toggleIndexer=function(t){e.indexers[t]=!e.indexers[t]},i.getSafe().then(function(t){u=t,e.availableIndexers=_.chain(t.indexers).filter(function(e){return e.enabled&&e.showOnSearch}).sortBy("name").map(function(e){return{name:e.name,activated:p(e)}}).value()}),e.mode&&(console.log("Starting search in newly loaded search controller"),e.startSearch())}function RestartService(e,t,n,a){function o(a){a=angular.isUndefined?"":" ",e.start(a+"Restarting. Will reload page in 5 seconds..."),t(function(){e.start(a+"Restarting. Will reload page in 4 seconds..."),t(function(){e.start(a+"Restarting. Will reload page in 3 seconds..."),t(function(){e.start(a+"Restarting. Will reload page in 2 seconds..."),t(function(){e.start(a+"Restarting. Will reload page in 1 second..."),t(function(){e.start("Reloading page..."),n.location.reload()},1e3)},1e3)},1e3)},1e3)},1e3)}function r(e){a.restart().then(o(e),function(){growl.info("Unable to send restart command.")})}return{restart:r,countdownAndReload:o}}function NzbHydraControlService(e){function t(){return e.get("internalapi/restart")}function n(){return e.get("internalapi/shutdown")}return{restart:t,shutdown:n}}function NzbDownloadService(e,t,n){function a(t,n){return console.log("Now add nzb with category "+n),e.put("internalapi/addnzbs",{items:angular.toJson(t),category:n})}function o(e){return t.getSafe().then(function(t){var o;return o="nzbget"==t.downloader.downloader?t.downloader.nzbget.defaultCategory:t.downloader.sabnzbd.defaultCategory,_.isUndefined(o)||""==o||null==o?n.openCategorySelection().then(function(t){return a(e,t)},function(e){throw e}):a(e,o)})}var r={download:o};return r}function ModalService(e){function t(t,n,a,o){var r=e.open({templateUrl:"static/html/modal.html",controller:"ModalInstanceCtrl",size:"md",resolve:{headline:function(){return t},message:function(){return n},ok:function(){return a},cancel:function(){return o}}});r.result.then(function(){},function(){o()})}return{open:t}}function ModalInstanceCtrl(e,t,n,a,o,r){e.message=a,e.headline=n,e.ok=function(){t.close(),angular.isUndefined(o)||o()},e.cancel=function(){t.dismiss(),angular.isUndefined(r)||r()}}function GeneralModalService(){this.open=function(e,t,n,a,o){var r=angular.injector(["ng","ui.bootstrap"]),i=r.get("$uibModal"),l={};angular.isUndefined(a)&&(l.size=a),angular.isUndefined(t)?angular.isUndefined(n)?l.template="<pre>"+e+"</pre>":l.templateUrl=n:l.template=t,l.resolve={data:function(){return console.log(o),o}},console.log(l);var s=i.open(l);s.result.then()}}function ConfigService(e,t,n){function a(t){e.put("internalapi/setsettings",t).then(function(e){console.log("Settings saved. Updating cache"),s.put("config",t)},function(e){console.log("Error saving settings: "+e)})}function o(){var t=s.get("config");return angular.isUndefined(t)&&(t=e.get("internalapi/getconfig").then(function(e){return e.data}),s.put("config",t)),t}function r(){var t=s.get("safeconfig");return angular.isUndefined(t)&&(t=e.get("internalapi/getsafeconfig").then(function(e){return e.data}),s.put("safeconfig",t)),t}function i(){s.remove("safeconfig")}function l(){function n(){var n=s.get("maySeeAdminArea");if(!angular.isUndefined(n)){var a=t.defer();return a.resolve(n),a.promise}return e.get("internalapi/mayseeadminarea").then(function(e){var t=e.data;return s.put("maySeeAdminArea",t),e.data})}return n().then(function(e){return e})}var s=n("nzbhydra");return{set:a,get:o,getSafe:r,invalidateSafe:i,maySeeAdminArea:l}}function ConfigFields(){function e(e){l=e}function t(e,t,n){t!=n&&l()}function n(e,t,n,a,o,r,i,l,s){var d=[];return d.push({key:"enabled",type:"horizontalSwitch",templateOptions:{type:"switch",label:"Enabled"}}),"newznab"==i&&d.push({key:"name",type:"horizontalNewznabPreset",hideExpression:"!model.enabled",templateOptions:{label:"Presets"}}),e&&d.push({key:"name",type:"horizontalInput",hideExpression:"!model.enabled",templateOptions:{type:"text",label:"Name",required:!0,help:"Used for identification. Changing the name will lose all history and stats!"}}),t&&d.push({key:"host",type:"horizontalInput",hideExpression:"!model.enabled",templateOptions:{type:"text",label:"Host",required:!0,placeholder:"http://www.someindexer.com"}}),n&&d.push({key:"apikey",type:"horizontalInput",hideExpression:"!model.enabled",templateOptions:{type:"text",required:!0,label:"API Key"}}),a&&d.push({key:"username",type:"horizontalInput",hideExpression:"!model.enabled",templateOptions:{type:"text",required:!0,label:"Username"}}),d=d.concat([{key:"score",type:"horizontalInput",hideExpression:"!model.enabled",templateOptions:{type:"number",label:"Score",required:!0,help:"When duplicate search results are found the result from the indexer with the highest score will be shown"}},{key:"timeout",type:"horizontalInput",hideExpression:"!model.enabled",templateOptions:{type:"number",label:"Timeout",help:'Supercedes the general timeout in "Searching"'}}]),l&&(d.push({key:"preselect",type:"horizontalSwitch",hideExpression:'!model.enabled || model.accessType == "external"',templateOptions:{type:"switch",label:"Preselect",help:"Preselect this indexer on the search page"}}),d.push({key:"accessType",type:"horizontalSelect",hideExpression:"!model.enabled",templateOptions:{label:"Enable for...",options:[{name:"Internal searches only",value:"internal"},{name:"API searches only",value:"external"},{name:"Internal and API searches",value:"both"}]}})),o&&d.push({key:"search_ids",type:"horizontalMultiselect",hideExpression:"!model.enabled",templateOptions:{label:"Search types",options:[{label:"TVDB",id:"tvdbid"},{label:"TVRage",id:"rid"},{label:"IMDB",id:"imdbid"},{label:"Trakt",id:"traktid"},{label:"TVMaze",id:"tvmazeid"},{label:"TMDB",id:"tmdbid"}]}}),r&&d.push({type:"horizontalTestConnection",hideExpression:"!model.enabled || !model.host || !model.apikey || !model.name",templateOptions:{label:"Test connection",testType:i}}),s&&d.push({type:"horizontalCheckCaps",hideExpression:"!model.enabled || !model.host || !model.apikey || !model.name",templateOptions:{label:"Check search types",help:"Find out what search types the indexer supports. It's recommended to do this for every new indexer."}}),d}function a(){return{expression:function(e,t){var n=t||e;return n?/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/.test(n)||/^(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/.test(n):!0},message:'$viewValue + " is not a valid IP Address"'}}function o(e){return{expression:function(t,n,a){var o=t||n;return o?!0:e.auth.users.length>0?_.any(e.auth.users,function(e){return a.model.name!=e.name&&e.maySeeAdmin}):!0},message:'"If you have users at least one should have admin rights or you lock yourself out"'}}function r(e,t,n){return{expression:function(t,n){var a=n||t;return a?e.test(a):!0},message:(n?'$viewValue + " ':'" ')+t+'"'}}function i(e){return{main:[{wrapper:"fieldset",templateOptions:{label:"Hosting"},fieldGroup:[{key:"host",type:"horizontalInput",templateOptions:{type:"text",label:"Host",required:!0,placeholder:"IPv4 address to bind to",help:"Requires restart"},validators:{ipAddress:a()},watcher:{listener:t}},{key:"port",type:"horizontalInput",templateOptions:{type:"number",label:"Port",required:!0,placeholder:"5050",help:"Requires restart"},validators:{port:r(/^\d{1,5}$/,"is no valid port",!0)},watcher:{listener:t}},{key:"urlBase",type:"horizontalInput",templateOptions:{type:"text",label:"URL base",placeholder:"/nzbhydra",help:"Set when using an external proxy"},validators:{urlBase:r(/^\/[\w\/]*$/,"Base URL needs to start with a slash and must not end with one")}},{key:"externalUrl",type:"horizontalInput",templateOptions:{type:"text",label:"External URL",placeholder:"https://www.somedomain.com/nzbhydra/",help:"Set to the full external URL so machines outside can use the generated NZB links."}},{key:"useLocalUrlForApiAccess",type:"horizontalSwitch",hideExpression:"!model.externalUrl",templateOptions:{type:"switch",label:"Use local address in API results",help:"Disable to make API results use the external URL in NZB links."}},{key:"ssl",type:"horizontalSwitch",templateOptions:{type:"switch",label:"Use SSL",help:"Requires restart"},watcher:{listener:t}},{key:"sslcert",hideExpression:"!model.ssl",type:"horizontalInput",templateOptions:{type:"text",label:"SSL certificate file",required:!0,help:"Requires restart"},watcher:{listener:t}},{key:"sslkey",hideExpression:"!model.ssl",type:"horizontalInput",templateOptions:{type:"text",label:"SSL key file",required:!0,help:"Requires restart"},watcher:{listener:t}}]},{wrapper:"fieldset",templateOptions:{label:"Security"},fieldGroup:[{key:"apikey",type:"horizontalApiKeyInput",templateOptions:{label:"API key",help:"Remove to disable. Alphanumeric only"},validators:{apikey:r(/^[a-zA-Z0-9]*$/,"API key must only contain numbers and digits",!1)}}]},{wrapper:"fieldset",key:"logging",templateOptions:{label:"Logging"},fieldGroup:[{key:"logfilelevel",type:"horizontalSelect",templateOptions:{type:"select",label:"Logfile level",options:[{name:"Critical",value:"CRITICAL"},{name:"Error",value:"ERROR"},{name:"Warning",value:"WARNING"},{name:"Debug",value:"DEBUG"},{name:"Info",value:"INFO"}]},watcher:{listener:t}},{key:"logfilename",type:"horizontalInput",templateOptions:{type:"text",label:"Log file",required:!0},watcher:{listener:t}},{key:"consolelevel",type:"horizontalSelect",templateOptions:{type:"select",label:"Console log level",options:[{name:"Critical",value:"CRITICAL"},{name:"Error",value:"ERROR"},{name:"Warning",value:"WARNING"},{name:"Info",value:"INFO"},{name:"Debug",value:"DEBUG"}]},watcher:{listener:t}}]},{wrapper:"fieldset",templateOptions:{label:"Other"},fieldGroup:[{key:"debug",type:"horizontalSwitch",templateOptions:{type:"switch",label:"Enable debugging",help:"Only do this if you know what and why you're doing it"}},{key:"runThreaded",type:"horizontalSwitch",templateOptions:{type:"switch",label:"Run threaded server",help:"Requires restart. Experimental. Please report your experiences."},watcher:{listener:t}},{key:"startupBrowser",type:"horizontalSwitch",templateOptions:{type:"switch",label:"Open browser on startup"}},{key:"branch",type:"horizontalInput",templateOptions:{type:"text",label:"Repository branch",required:!0,help:"Stay on master. Seriously..."}}]}],searching:[{wrapper:"fieldset",templateOptions:{label:"Indexer access"},fieldGroup:[{key:"timeout",type:"horizontalInput",templateOptions:{type:"number",label:"Timeout when accessing indexers",addonRight:{text:"seconds"}}},{key:"ignoreTemporarilyDisabled",type:"horizontalSwitch",templateOptions:{type:"switch",label:"Ignore temporarily disabled",help:"If enabled access to indexers will never be paused after an error occurred"}},{key:"ignorePassworded",type:"horizontalSwitch",templateOptions:{type:"switch",label:"Ignore passworded releases",help:"Not all indexers provide this information"}},{key:"ignoreWords",type:"horizontalInput",templateOptions:{type:"text",label:"Ignore results with ...",placeholder:"separate, with, commas, like, this",help:"Results with any of these words in the title will be ignored"}},{key:"generate_queries",type:"horizontalMultiselect",templateOptions:{label:"Generate queries",options:[{label:"Internal searches",id:"internal"},{label:"API searches",id:"external"}],help:"Generate queries for indexers which do not support ID based searches"}},{key:"userAgent",type:"horizontalInput",templateOptions:{type:"text",label:"User agent",required:!0}}]},{wrapper:"fieldset",templateOptions:{label:"Result processing"},fieldGroup:[{key:"htmlParser",type:"horizontalSelect",templateOptions:{type:"select",label:"Type",options:[{name:"Default BS (slow)",value:"html.parser"},{name:"LXML (faster, needs to be installed separately)",value:"lxml"}]}},{key:"duplicateSizeThresholdInPercent",type:"horizontalPercentInput",templateOptions:{type:"text",label:"Duplicate size threshold",required:!0,addonRight:{text:"%"}}},{key:"duplicateAgeThreshold",type:"horizontalInput",templateOptions:{type:"number",label:"Duplicate age threshold",required:!0,addonRight:{text:"seconds"}}},{key:"removeDuplicatesExternal",type:"horizontalSwitch",templateOptions:{type:"switch",label:"Remove API duplicates",help:"Remove duplicates when searching via API"}}]},{wrapper:"fieldset",key:"categorysizes",templateOptions:{label:"Category sizes"},fieldGroup:[{key:"enable_category_sizes",type:"horizontalSwitch",templateOptions:{type:"switch",label:"Category sizes",help:"Preset min and max sizes depending on the selected category"}},{wrapper:"logicalGroup",hideExpression:"!model.enable_category_sizes",fieldGroup:[{wrapper:"settingWrapper",templateOptions:{label:"Movies"},fieldGroup:[{key:"moviesmin",type:"duoSetting",templateOptions:{addonRight:{text:"MB"}}},{type:"duolabel"},{key:"moviesmax",type:"duoSetting",templateOptions:{addonRight:{text:"MB"}}}]},{wrapper:"settingWrapper",templateOptions:{label:"Movies HD"},fieldGroup:[{key:"movieshdmin",type:"duoSetting",templateOptions:{addonRight:{text:"MB"}}},{type:"duolabel"},{key:"movieshdmax",type:"duoSetting",templateOptions:{addonRight:{text:"MB"}}}]},{wrapper:"settingWrapper",templateOptions:{label:"Movies SD"},fieldGroup:[{key:"moviessdmin",type:"duoSetting",templateOptions:{addonRight:{text:"MB"}}},{type:"duolabel"},{key:"movieshdmin",type:"duoSetting",templateOptions:{addonRight:{text:"MB"}}}]},{wrapper:"settingWrapper",templateOptions:{label:"TV"},fieldGroup:[{key:"tvmin",type:"duoSetting",templateOptions:{addonRight:{text:"MB"}}},{type:"duolabel"},{key:"tvmax",type:"duoSetting",templateOptions:{addonRight:{text:"MB"}}}]},{wrapper:"settingWrapper",templateOptions:{label:"TV HD"},fieldGroup:[{key:"tvhdmin",type:"duoSetting",templateOptions:{addonRight:{text:"MB"}}},{type:"duolabel"},{key:"tvhdmax",type:"duoSetting",templateOptions:{addonRight:{text:"MB"}}}]},{wrapper:"settingWrapper",templateOptions:{label:"TV SD"},fieldGroup:[{key:"tvsdmin",type:"duoSetting",templateOptions:{addonRight:{
text:"MB"}}},{type:"duolabel"},{key:"tvsdmax",type:"duoSetting",templateOptions:{addonRight:{text:"MB"}}}]},{wrapper:"settingWrapper",templateOptions:{label:"Audio"},fieldGroup:[{key:"audiomin",type:"duoSetting",templateOptions:{addonRight:{text:"MB"}}},{type:"duolabel"},{key:"audiomax",type:"duoSetting",templateOptions:{addonRight:{text:"MB"}}}]},{wrapper:"settingWrapper",templateOptions:{label:"Audio FLAC"},fieldGroup:[{key:"flacmin",type:"duoSetting",templateOptions:{addonRight:{text:"MB"}}},{type:"duolabel"},{key:"flacmax",type:"duoSetting",templateOptions:{addonRight:{text:"MB"}}}]},{wrapper:"settingWrapper",templateOptions:{label:"Audio MP3"},fieldGroup:[{key:"mp3min",type:"duoSetting",templateOptions:{addonRight:{text:"MB"}}},{type:"duolabel"},{key:"mp3max",type:"duoSetting",templateOptions:{addonRight:{text:"MB"}}}]},{wrapper:"settingWrapper",templateOptions:{label:"Audiobook"},fieldGroup:[{key:"audiobookmin",type:"duoSetting",templateOptions:{addonRight:{text:"MB"}}},{type:"duolabel"},{key:"audiobookmax",type:"duoSetting",templateOptions:{addonRight:{text:"MB"}}}]},{wrapper:"settingWrapper",templateOptions:{label:"Console"},fieldGroup:[{key:"consolemin",type:"duoSetting",templateOptions:{addonRight:{text:"MB"}}},{type:"duolabel"},{key:"consolemax",type:"duoSetting",templateOptions:{addonRight:{text:"MB"}}}]},{wrapper:"settingWrapper",templateOptions:{label:"PC"},fieldGroup:[{key:"pcmin",type:"duoSetting",templateOptions:{addonRight:{text:"MB"}}},{type:"duolabel"},{key:"pcmax",type:"duoSetting",templateOptions:{addonRight:{text:"MB"}}}]},{wrapper:"settingWrapper",templateOptions:{label:"XXX"},fieldGroup:[{key:"xxxmin",type:"duoSetting",templateOptions:{addonRight:{text:"MB"}}},{type:"duolabel"},{key:"xxxmax",type:"duoSetting",templateOptions:{addonRight:{text:"MB"}}}]}]}]}],downloader:[{key:"downloader",type:"horizontalSelect",templateOptions:{type:"select",label:"Downloader",options:[{name:"None",value:"none"},{name:"NZBGet",value:"nzbget"},{name:"SABnzbd",value:"sabnzbd"}]}},{key:"nzbaccesstype",type:"horizontalSelect",templateOptions:{type:"select",label:"NZB access type",options:[{name:"Proxy NZBs from indexer",value:"serve"},{name:"Redirect to the indexer",value:"redirect"}],help:"How external access to NZBs is provided. Redirecting is recommended."}},{key:"nzbAddingType",type:"horizontalSelect",templateOptions:{type:"select",label:"NZB adding type",options:[{name:"Send link",value:"link"},{name:"Upload NZB",value:"nzb"}],help:"How NZBs are added to the downloader, either by sending a link to the NZB or by uploading the NZB data"}},{wrapper:"fieldset",key:"nzbget",hideExpression:'model.downloader!="nzbget"',templateOptions:{label:"NZBGet"},fieldGroup:[{key:"host",type:"horizontalInput",templateOptions:{type:"text",label:"Host",required:!0}},{key:"port",type:"horizontalInput",templateOptions:{type:"number",label:"Port",placeholder:"5050",required:!0}},{key:"ssl",type:"horizontalSwitch",templateOptions:{type:"switch",label:"Use SSL"}},{key:"username",type:"horizontalInput",templateOptions:{type:"text",label:"Username"}},{key:"password",type:"horizontalInput",templateOptions:{type:"password",label:"Password"}},{key:"defaultCategory",type:"horizontalInput",templateOptions:{type:"text",label:"Default category",help:"When adding NZBs this category will be used instead of asking for the category"}},{type:"horizontalTestConnection",templateOptions:{label:"Test connection",testType:"downloader",downloader:"nzbget"}}]},{wrapper:"fieldset",key:"sabnzbd",hideExpression:'model.downloader!="sabnzbd"',templateOptions:{label:"SABnzbd"},fieldGroup:[{key:"url",type:"horizontalInput",templateOptions:{type:"text",label:"URL",required:!0}},{key:"username",type:"horizontalInput",templateOptions:{type:"text",label:"Username",help:"Usually not needed when an API key is used"}},{key:"password",type:"horizontalInput",templateOptions:{type:"password",label:"Password",help:"Usually not needed when an API key is used"}},{key:"apikey",type:"horizontalInput",templateOptions:{type:"text",label:"API Key"}},{key:"defaultCategory",type:"horizontalInput",templateOptions:{type:"text",label:"Default category",help:"When adding NZBs this category will be used instead of asking for the category"}},{type:"horizontalTestConnection",templateOptions:{label:"Test connection",testType:"downloader",downloader:"sabnzbd"}}]}],indexers:[{wrapper:"fieldset",key:"binsearch",templateOptions:{label:"Binsearch"},fieldGroup:n(!1,!1,!1,!1,!1,!1,"binsearch",!0)},{wrapper:"fieldset",key:"nzbclub",templateOptions:{label:"NZBClub"},fieldGroup:n(!1,!1,!1,!1,!1,!1,"nzbclub",!0)},{wrapper:"fieldset",key:"nzbindex",templateOptions:{label:"NZBIndex"},fieldGroup:n(!1,!1,!1,!1,!1,!1,"nzbindex",!0).concat([{key:"generalMinSize",type:"horizontalInput",hideExpression:"!model.enabled",templateOptions:{type:"number",label:"Min size",help:"NZBIndex returns a lot of crap with small file sizes. Set this value and all smaller results will be filtered out no matter the category"}}])},{wrapper:"fieldset",key:"omgwtfnzbs",templateOptions:{label:"omgwtfnzbs.org"},fieldGroup:n(!1,!1,!0,!0,!1,!0,"omgwtf",!0)},{wrapper:"fieldset",key:"womble",templateOptions:{label:"Womble"},fieldGroup:n(!1,!1,!1,!1,!1,!1,"womble",!1)},{type:"repeatSection",key:"newznab",templateOptions:{btnText:"Add new newznab indexer",altLegendText:"New indexer",fields:n(!0,!0,!0,!1,!0,!0,"newznab",!0,!0),defaultModel:{enabled:!0,host:null,apikey:null,timeout:null,name:null,showOnSearch:!0,score:0,preselect:!0,accessType:"both",search_ids:["imdbid","rid","tvdbid"]}}}],auth:[{type:"help",templateOptions:{lines:["To require login only for admin access create a user with empty username and password and add a user with username and password and admin rights.","To have a simple and an admin user remove the authless user and create two users, one without and one with admin rights.","Leave empty to disable authorization."]}},{type:"repeatSection",key:"users",model:e.auth,templateOptions:{btnText:"Add new user",altLegendText:"Authless",fields:[{key:"name",type:"horizontalInput",templateOptions:{type:"text",label:"Username"}},{key:"password",type:"horizontalInput",templateOptions:{type:"text",label:"Password"}},{key:"maySeeStats",type:"horizontalSwitch",templateOptions:{type:"switch",label:"May see stats"}},{key:"maySeeAdmin",type:"horizontalSwitch",templateOptions:{type:"switch",label:"May see admin area"},validators:{dontLockYourselfOut:o(e)},data:{rootModel:e}}],defaultModel:{name:null,password:null,maySeeStats:!0,maySeeAdmin:!0}}}]}}var l;return{getFields:i,setRestartWatcher:e}}function ConfigController(e,t,n,a,o,r,i,l,s){function d(n){n.$valid&&(t.set(e.config),t.invalidateSafe(),n.$setPristine(),a.invalidate(),e.restartRequired&&i.open("Restart required","The changes you have made may require a restart to be effective.<br>Do you want to restart now?",function(){l.restart()},function(){e.restartRequired=!1}))}e.config=n,e.submit=d,e.restartRequired=!1,o.setRestartWatcher(function(){e.restartRequired=!0}),r=n,e.fields=o.getFields(e.config),e.formTabs=[{name:"Main",model:r.main,fields:e.fields.main},{name:"Authorization",model:r.auth,fields:e.fields.auth},{name:"Searching",model:r.searching,fields:e.fields.searching},{name:"Downloader",model:r.downloader,fields:e.fields.downloader},{name:"Indexers",model:r.indexers,fields:e.fields.indexers}],e.allTabs=[{active:!1,state:"config"},{active:!1,state:"config.auth"},{active:!1,state:"config.searching"},{active:!1,state:"config.downloader"},{active:!1,state:"config.indexers"}];for(var p=0;p<e.allTabs.length;p++)s.is(e.allTabs[p].state)&&(e.allTabs[p].active=!0);e.isSavingNeeded=function(e){return e.$dirty&&!e.$submitted&&e.$valid},e.goToConfigState=function(t){s.go(e.allTabs[t].state),5==t&&e.downloadLog()}}function CategoriesService(e,t,n){function a(){function n(){if(!angular.isUndefined(l)){var n=t.defer();return n.resolve(l),n.promise}return e.get("internalapi/getcategories").then(function(e){return console.log("Updating downloader categories cache"),l=e.data,e.data},function(e){throw e})}return n().then(function(e){return e.categories})}function o(){return n.open({templateUrl:"static/html/directives/addable-nzb-modal.html",controller:"CategorySelectionController",size:"sm",resolve:{categories:a}}),p=t.defer(),p.promise}function r(e){s=e,console.log("Selected category "+e),p.resolve(e)}function i(){console.log("Invalidating categories"),l=void 0}var l,s,d={get:a,invalidate:i,select:r,openCategorySelection:o};return d;var p}var nzbhydraapp=angular.module("nzbhydraApp",["angular-loading-bar","cgBusy","ngAnimate","ui.bootstrap","ipCookie","angular-growl","angular.filter","filters","ui.router","blockUI","mgcrea.ngStrap","angularUtils.directives.dirPagination","nvd3","formly","formlyBootstrap","frapontillo.bootstrap-switch","ui.select","ngSanitize","checklist-model","ngAria","ngMessages"]);angular.module("nzbhydraApp").config(["$stateProvider","$urlRouterProvider","$locationProvider","blockUIConfig","$urlMatcherFactoryProvider",function(e,t,n,a,o){a.autoBlock=!1,o.strictMode(!1),e.state("search.results",{templateUrl:"static/html/states/search-results.html",controller:"SearchResultsController",controllerAs:"srController",options:{inherit:!1},params:{results:[],indexersearches:[],total:0,resultsCount:0,minsize:void 0,maxsize:void 0,minage:void 0,maxage:void 0}}).state("config",{url:"/config",templateUrl:"static/html/states/config.html",controller:"ConfigController",resolve:{config:["ConfigService",function(e){return e.get()}],safeConfig:["ConfigService",function(e){return e.getSafe()}]}}).state("config.auth",{url:"/auth",templateUrl:"static/html/states/config.html",controller:"ConfigController",resolve:{config:["ConfigService",function(e){return e.get()}]}}).state("config.searching",{url:"/searching",templateUrl:"static/html/states/config.html",controller:"ConfigController",resolve:{config:["ConfigService",function(e){return e.get()}]}}).state("config.downloader",{url:"/downloader",templateUrl:"static/html/states/config.html",controller:"ConfigController",resolve:{config:["ConfigService",function(e){return e.get()}]}}).state("config.indexers",{url:"/indexers",templateUrl:"static/html/states/config.html",controller:"ConfigController",resolve:{config:["ConfigService",function(e){return e.get()}]}}).state("config.system",{url:"/system",templateUrl:"static/html/states/config.html",controller:"ConfigController",resolve:{config:["ConfigService",function(e){return e.get()}]}}).state("config.log",{url:"/log",templateUrl:"static/html/states/config.html",controller:"ConfigController",resolve:{config:["ConfigService",function(e){return e.get()}]}}).state("stats",{url:"/stats",templateUrl:"static/html/states/stats.html",controller:"StatsController",resolve:{stats:["StatsService",function(e){return e.get()}]}}).state("stats.indexers",{url:"/indexers",templateUrl:"static/html/states/stats.html",controller:"StatsController",resolve:{stats:["StatsService",function(e){return e.get()}]}}).state("stats.searches",{url:"/searches",templateUrl:"static/html/states/stats.html",controller:"StatsController",resolve:{stats:["StatsService",function(e){return e.get()}]}}).state("stats.downloads",{url:"/downloads",templateUrl:"static/html/states/stats.html",controller:"StatsController",resolve:{stats:["StatsService",function(e){return e.get()}]}}).state("system",{url:"/system",templateUrl:"static/html/states/system.html",controller:"SystemController",resolve:{foobar:["$http",function(e){return e.get("internalapi/askforadmin")}]}}).state("system.updates",{url:"/updates",templateUrl:"static/html/states/system.html",controller:"SystemController",resolve:{foobar:["$http",function(e){return e.get("internalapi/askforadmin")}]}}).state("system.log",{url:"/log",templateUrl:"static/html/states/system.html",controller:"SystemController",resolve:{foobar:["$http",function(e){return e.get("internalapi/askforadmin")}]}}).state("system.about",{url:"/about",templateUrl:"static/html/states/system.html",controller:"SystemController",resolve:{foobar:["$http",function(e){return e.get("internalapi/askforadmin")}]}}).state("search",{url:"/:search?category&query&imdbid&tvdbid&title&season&episode&minsize&maxsize&minage&maxage&offsets&rid&mode&tmdbid&indexers",templateUrl:"static/html/states/search.html",controller:"SearchController",resolve:{safeConfig:["ConfigService",function(e){return e.getSafe()}]}}),n.html5Mode(!0)}]),nzbhydraapp.config(["paginationTemplateProvider",function(e){e.setPath("static/html/dirPagination.tpl.html")}]),nzbhydraapp.config(["cfpLoadingBarProvider",function(e){e.latencyThreshold=100}]),nzbhydraapp.config(["growlProvider",function(e){e.globalTimeToLive(5e3),e.globalPosition("bottom-right")}]),nzbhydraapp.directive("ngEnter",function(){return function(e,t,n){t.bind("keydown keypress",function(t){13===t.which&&(e.$apply(function(){e.$evalAsync(n.ngEnter)}),t.preventDefault())})}}),nzbhydraapp.filter("nzblink",function(){return function(e){var t=new URI("internalapi/getnzb");return t.addQuery("guid",e.guid),t.addQuery("title",e.title),t.addQuery("provider",e.provider),t.toString()}}),nzbhydraapp.factory("focus",["$rootScope","$timeout",function(e,t){return function(n){t(function(){e.$broadcast("focusOn",n)})}}]),nzbhydraapp.filter("unsafe",["$sce",function(e){return e.trustAsHtml}]),_.mixin({isNullOrEmpty:function(e){return _.isUndefined(e)||_.isNull(e)||_.isString(e)&&0===e.length}}),angular.module("nzbhydraApp").directive("hydraupdates",hydraupdates),angular.module("nzbhydraApp").directive("searchResult",searchResult),angular.module("nzbhydraApp").directive("otherColumns",otherColumns),otherColumns.$inject=["$http","$templateCache","$compile","$window"],angular.module("nzbhydraApp").controller("NfoModalInstanceCtrl",NfoModalInstanceCtrl),NfoModalInstanceCtrl.$inject=["$scope","$modalInstance","nfo"],angular.module("nzbhydraApp").directive("searchHistory",searchHistory),angular.module("nzbhydraApp").directive("onFinishRender",onFinishRender),onFinishRender.$inject=["$timeout"],angular.module("nzbhydraApp").directive("hydralog",hydralog),angular.module("nzbhydraApp").directive("indexerStatuses",indexerStatuses),angular.module("nzbhydraApp").filter("formatDate",formatDate),formatDate.$inject=["dateFilter"],angular.module("nzbhydraApp").directive("focusOn",focusOn),angular.module("nzbhydraApp").directive("downloadHistory",downloadHistory),angular.module("nzbhydraApp").directive("cfgFormEntry",cfgFormEntry),angular.module("nzbhydraApp").directive("addableNzb",addableNzb),angular.module("nzbhydraApp").factory("UpdateService",UpdateService),UpdateService.$inject=["$http","growl","blockUI","RestartService"],angular.module("nzbhydraApp").controller("UpdateFooterController",UpdateFooterController),UpdateFooterController.$inject=["$scope","UpdateService"],angular.module("nzbhydraApp").controller("SystemController",SystemController),SystemController.$inject=["$scope","$state","growl","RestartService","NzbHydraControlService"],angular.module("nzbhydraApp").factory("StatsService",StatsService),StatsService.$inject=["$http"],angular.module("nzbhydraApp").controller("StatsController",StatsController),StatsController.$inject=["$scope","stats","$state"],angular.module("nzbhydraApp").factory("SearchService",SearchService),SearchService.$inject=["$http"],angular.module("nzbhydraApp").controller("SearchResultsController",SearchResultsController),SearchResultsController.$inject=["$stateParams","$scope","$q","$timeout","blockUI","SearchService","growl","NzbDownloadService"],angular.module("nzbhydraApp").controller("SearchController",SearchController),SearchController.$inject=["$scope","$http","$stateParams","$state","SearchService","focus","ConfigService","blockUI"],angular.module("nzbhydraApp").factory("RestartService",RestartService),RestartService.$inject=["blockUI","$timeout","$window","NzbHydraControlService"],angular.module("nzbhydraApp").factory("NzbHydraControlService",NzbHydraControlService),NzbHydraControlService.$inject=["$http"],angular.module("nzbhydraApp").factory("NzbDownloadService",NzbDownloadService),NzbDownloadService.$inject=["$http","ConfigService","CategoriesService"],angular.module("nzbhydraApp").factory("ModalService",ModalService),ModalService.$inject=["$uibModal"],angular.module("nzbhydraApp").controller("ModalInstanceCtrl",ModalInstanceCtrl),ModalInstanceCtrl.$inject=["$scope","$uibModalInstance","headline","message","ok","cancel"],angular.module("nzbhydraApp").service("GeneralModalService",GeneralModalService);var HEADER_NAME="MyApp-Handle-Errors-Generically",specificallyHandleInProgress=!1;nzbhydraapp.factory("RequestsErrorHandler",["$q","growl","blockUI","GeneralModalService",function(e,t,n,a){return{specificallyHandled:function(e){specificallyHandleInProgress=!0;try{return e()}finally{specificallyHandleInProgress=!1}},responseError:function(t){n.reset();var o=t&&t.config&&t.config.headers&&t.config.headers[HEADER_NAME];if(o){var r="An error occured :<br>"+t.status+": "+t.statusText;t.data&&(r+="<br><br>"+t.data),a.open(r)}return e.reject(t)}}}]),nzbhydraapp.config(["$provide","$httpProvider",function(e,t){function n(e){return e=e||{},e.headers=e.headers||{},specificallyHandleInProgress||(e.headers[HEADER_NAME]=!0),e}t.interceptors.push("RequestsErrorHandler"),e.decorator("$http",["$delegate",function(e){function t(t){return function(a,o){return e[t](a,n(o))}}function a(t){return function(a,o,r){return e[t](a,o,n(r))}}function o(t){for(var n in e)t.hasOwnProperty(n)||("function"==typeof e[n]?t[n]=function(){return e.apply(e,arguments)}:t[n]=e[n])}var r=function(t){return e(n(t))};return r.get=t("get"),r["delete"]=t("delete"),r.head=t("head"),r.jsonp=t("jsonp"),r.post=a("post"),r.put=a("put"),o(r),r}])}]),hashCode=function(e){return e.split("").reduce(function(e,t){return e=(e<<5)-e+t.charCodeAt(0),e&e},0)},angular.module("nzbhydraApp").config(["formlyConfigProvider",function(e){e.extras.removeChromeAutoComplete=!0,e.extras.explicitAsync=!0,e.disableWarnings=window.onProd,e.setWrapper({name:"settingWrapper",templateUrl:"setting-wrapper.html",controller:["$scope",function(e){function t(t){var n=e.options.validation.messages[t];return n?n(e.fc.$viewValue,e.fc.$modelValue,e):void 0}e.options.data.getValidationMessage=t}]}),e.setWrapper({name:"fieldset",template:["<fieldset>","<legend>{{options.templateOptions.label}}</legend>","<formly-transclude></formly-transclude>","</fieldset>"].join(" ")}),e.setType({name:"help",template:['<div class="panel panel-default">','<div class="panel-body">','<div ng-repeat="line in options.templateOptions.lines">{{ line }}</div>',"</div>","</div>"].join(" ")}),e.setWrapper({name:"logicalGroup",template:["<formly-transclude></formly-transclude>"].join(" ")}),e.setType({name:"horizontalInput","extends":"input",wrapper:["settingWrapper","bootstrapHasError"],controller:["$scope",function(e){function t(t){var n=e.options.validation.messages[t];return n?n(e.fc.$viewValue,e.fc.$modelValue,e):void 0}e.options.data.getValidationMessage=t}]}),e.setType({name:"percentInput",template:['<input type="number" class="form-control" placeholder="Percent" ng-model="model[options.key]" ng-pattern="/^[0-9]+(.[0-9]{1,2})?$/" step="0.01" required />'].join(" ")}),e.setType({name:"apiKeyInput",template:['<div class="input-group">','<input type="text" class="form-control" ng-model="model[options.key]"/>','<span class="input-group-btn input-group-btn2">','<button class="btn btn-default" type="button" ng-click="generate()"><span class="glyphicon glyphicon-refresh"></span></button>',"</div>"].join(" "),controller:function(e){e.generate=function(){e.model[e.options.key]=(1e32*Math.random()).toString(36)}}}),e.setType({name:"testConnection",templateUrl:"button-test-connection.html",controller:function(e){function t(){angular.element(a).removeClass("btn-default"),angular.element(a).removeClass("btn-danger"),angular.element(a).addClass("btn-success")}function n(){angular.element(a).removeClass("btn-default"),angular.element(a).removeClass("btn-success"),angular.element(a).addClass("btn-danger")}e.message="",e.uniqueId=hashCode(e.model.name)+hashCode(e.model.host);var a="#button-test-connection-"+e.uniqueId,o="#message-test-connection-"+e.uniqueId;console.log(e),e.testConnection=function(){angular.element(a).addClass("glyphicon-refresh-animate");var r,i,l=angular.injector(["ng"]),s=l.get("$http");"downloader"==e.to.testType?(r="internalapi/test_downloader",i={name:e.to.downloader,username:e.model.username,password:e.model.password},"sabnzbd"==e.to.downloader?(i.apikey=e.model.apikey,i.url=e.model.url):(i.host=e.model.host,i.port=e.model.port,i.ssl=e.model.ssl)):"newznab"==e.to.testType?(r="internalapi/test_newznab",i={host:e.model.host,apikey:e.model.apikey}):"omgwtf"==e.to.testType&&(r="internalapi/test_omgwtf",i={username:e.model.username,apikey:e.model.apikey}),s.get(r,{params:i}).success(function(e){e.result?(angular.element(o).text(""),t()):(angular.element(o).text(e.message),n())}).error(function(){angular.element(o).text(result.message),n()})["finally"](function(){angular.element(a).removeClass("glyphicon-refresh-animate")})}}}),e.setType({name:"checkCaps",templateUrl:"button-check-caps.html",controller:function(e){function t(){angular.element(a).removeClass("btn-default"),angular.element(a).removeClass("btn-danger"),angular.element(a).addClass("btn-success")}function n(){angular.element(a).removeClass("btn-default"),angular.element(a).removeClass("btn-success"),angular.element(a).addClass("btn-danger")}e.message="",e.uniqueId=hashCode(e.model.name)+hashCode(e.model.host);var a="#button-check-caps-"+e.uniqueId,o="#message-check-caps-"+e.uniqueId;e.checkCaps=function(){angular.element(a).addClass("glyphicon-refresh-animate");var r,i,l=angular.injector(["ng"]),s=l.get("$http");r="internalapi/test_caps",i={indexer:e.model.name,apikey:e.model.apikey,host:e.model.host},s.get(r,{params:i}).success(function(a){a.success?(angular.element(o).text("Supports: "+a.result),e.$apply(function(){e.model.search_ids=a.result}),t()):(angular.element(o).text(a.message),n())}).error(function(){angular.element(o).text(result.message),n()})["finally"](function(){angular.element(a).removeClass("glyphicon-refresh-animate")})}}}),e.setType({name:"horizontalNewznabPreset",wrapper:["settingWrapper"],templateUrl:"newznab-preset.html",controller:function(e){e.display="",e.selectedpreset=void 0,e.presets=[{name:"None"},{name:"DogNZB",host:"https://api.dognzb.cr",searchIds:["tvdbid","rid","imdbid"]},{name:"NZBs.org",host:"https://nzbs.org",searchIds:["tvdbid","rid","imdbid","tvmazeid"]},{name:"nzb.su",host:"https://api.nzb.su",searchIds:["rid","imdbid"]},{name:"nzbgeek",host:"https://api.nzbgeek.info",searchIds:["tvdbid","rid","imdbid"]},{name:"6box nzedb",host:"https://nzedb.6box.me",searchIds:["rid","imdbid"]},{name:"6box nntmux",host:"https://nn-tmux.6box.me",searchIds:["tvdbid","rid","imdbid"]},{name:"6box",host:"https://6box.me",searchIds:["imdbid"]},{name:"Drunken Slug",host:"https://drunkenslug.com",searchIds:["tvdbid","imdbid","tvmazeid","traktid","tmdbid"]}],e.selectPreset=function(t,n){"None"==t.name?(e.model.name="",e.model.host="",e.model.apikey="",e.model.score=0,e.model.timeout=null,e.model.search_ids=["tvdbid","rid","imdbid"],e.display=""):(e.model.name=t.name,e.model.host=t.host,e.model.search_ids=t.searchIds,_.defer(function(){e.display=t.name}))},e.$watch("[model.host]",function(){e.display=""},!0)}}),e.setType({name:"horizontalTestConnection","extends":"testConnection",wrapper:["settingWrapper","bootstrapHasError"]}),e.setType({name:"horizontalCheckCaps","extends":"checkCaps",wrapper:["settingWrapper","bootstrapHasError"]}),e.setType({name:"horizontalApiKeyInput","extends":"apiKeyInput",wrapper:["settingWrapper","bootstrapHasError"]}),e.setType({name:"horizontalPercentInput","extends":"percentInput",wrapper:["settingWrapper","bootstrapHasError"]}),e.setType({name:"switch",template:['<div style="text-align:left"><input bs-switch type="checkbox" ng-model="model[options.key]"/></div>'].join(" ")}),e.setType({name:"duoSetting","extends":"input",defaultOptions:{className:"col-md-9",templateOptions:{type:"number",noRow:!0,label:""}}}),e.setType({name:"horizontalSwitch","extends":"switch",wrapper:["settingWrapper","bootstrapHasError"]}),e.setType({name:"horizontalSelect","extends":"select",wrapper:["settingWrapper","bootstrapHasError"]}),e.setType({name:"horizontalMultiselect",defaultOptions:{templateOptions:{optionsAttr:"bs-options",ngOptions:"option[to.valueProp] as option in to.options | filter: $select.search",valueProp:"id",labelProp:"label"}},templateUrl:"ui-select-multiple.html",wrapper:["settingWrapper","bootstrapHasError"]}),e.setType({name:"label",template:'<label class="control-label">{{to.label}}</label>'}),e.setType({name:"duolabel","extends":"label",defaultOptions:{className:"col-md-2",templateOptions:{label:"-"}}}),e.setType({name:"repeatSection",templateUrl:"repeatSection.html",controller:function(e){function t(e){return e=angular.copy(e)}function n(){e.model[e.options.key]=e.model[e.options.key]||[];var t=e.model[e.options.key],n=angular.copy(e.options.templateOptions.defaultModel);t.push(n)}function a(t){e.model[e.options.key].splice(t,1)}e.formOptions={formState:e.formState},e.addNew=n,e.remove=a,e.copyFields=t,e.clear=function(t){return _.mapObject(t,function(t,n){return"object"==typeof n?(console.log("object "+t),console.log(t),e.clear(n)):void console.log("other "+t)})}}})}]),angular.module("nzbhydraApp").run(["formlyConfig","formlyValidationMessages",function(e,t){t.messages.required='to.label + " is required"',e.extras.errorExistsAndShouldBeVisibleExpression="fc.$touched || form.$submitted"}]);var filters=angular.module("filters",[]);filters.filter("bytes",function(){return function(e,t){if(isNaN(parseFloat(e))||!isFinite(e)||0==e)return"-";"undefined"==typeof t&&(t=1);var n=["b","kB","MB","GB","TB","PB"],a=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,Math.floor(a))).toFixed(t)+n[a]}}),filters.filter("unsafe",["$sce",function(e){return function(t,n){return e.trustAs(n||"html",text)}}]),angular.module("nzbhydraApp").factory("ConfigService",ConfigService),ConfigService.$inject=["$http","$q","$cacheFactory"],angular.module("nzbhydraApp").factory("ConfigFields",ConfigFields),angular.module("nzbhydraApp").factory("ConfigModel",function(){return{}}),angular.module("nzbhydraApp").factory("ConfigWatcher",function(){function e(e){t=e,t.$watchGroup(["config.main.host"],function(){console.log("Restart needed")},!0)}var t;return{watch:e}}),angular.module("nzbhydraApp").controller("ConfigController",ConfigController),ConfigController.$inject=["$scope","ConfigService","config","CategoriesService","ConfigFields","ConfigModel","ModalService","RestartService","$state"],angular.module("nzbhydraApp").factory("CategoriesService",CategoriesService),CategoriesService.$inject=["$http","$q","$uibModal"],angular.module("nzbhydraApp").controller("CategorySelectionController",["$scope","$uibModalInstance","CategoriesService","categories",function(e,t,n,a){console.log(a),e.categories=a,e.select=function(a){n.select(a),t.close(e)}}]);
//# sourceMappingURL=nzbhydra.js.map
